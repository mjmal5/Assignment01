$(document).ready(function () { var a = [], n = [], t = []; $.getJSON("NameData", function (t) { var e = []; for ($.each(t, function (i, a) { e.push(a) }), i = 0; i < e.length; i++)a[i] = e[i].Id, n[i] = e[i].Name }), $.getJSON("RatingData", function (a) { var e = [], r = [], o = [], u = [], l = [], c = []; for ($.each(a, function (i, a) { e.push(a) }), i = 0; i < e.length; i++)r[i] = e[i].Rating, o[i] = e[i].PizzaId; for (UniquePizzaID = o.filter(function (i, a, n) { return n.indexOf(i) == a }), x = 0; x < UniquePizzaID.length; x++)for (u[x] = 0, l[x] = 0, i = 0; i < o.length; i++)o[i] == UniquePizzaID[x] && (u[x] = u[x] + r[i], l[x] = l[x] + 1); for (i = 0; i < UniquePizzaID.length; i++)c[i] = u[i] / l[i], t[i] = { label: n[i], y: c[i] }; var f = { animationEnabled: !0, title: { text: "Pizza Popularity Ratings" }, axisX: { labelFontSize: 14 }, axisY: { maximum: 5, labelFontSize: 14 }, data: [{ type: "column", dataPoints: t }] }; $("#tabs").tabs({ create: function (i, a) { $("#chartContainer1").CanvasJSChart(f) }, activate: function (i, a) { a.newPanel.children().first().CanvasJSChart().render() } }) }) });